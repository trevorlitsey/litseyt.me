<!DOCTYPE html>

<html>

	<head>

    <title>__ talk</title>

	</head>

	<body>

		<div class="container">
			<div class="text">
				<p class"intro">(turn on your microphone)</p>
			</div>
		</div>


		<style>

			:root {
				font-size: calc(4vw + 4vh + 1vmin);
			}
		
			html body {
				background: hsl(0, 0%, 0%);
				height: 100vh;
				width: 100vw;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.container {
				text-align: center;
				width: 50%;
				height: 50%;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 2%;
			}

			.text {
				color: white;
			}

			p {
				font-size: .5rem;
			}
		
		</style>

		<Script>

			// select words on page
			const words = document.querySelector('.text');

			// too remember last words on page
			let lastText = "";

			// initiate speech recoginiation
			window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
			const recognition = new SpeechRecognition();
			recognition.interimResults = true;

			// listen for incoming speech
			recognition.addEventListener('result', e => {
				console.log('working');
				
				const transcript = Array.from(e.results)
					.map(result => {
						if (result[0].isFinal = true) return result[0];
					})
					.map(result => result.transcript)
					.join('');

				// stop function from running is text is same as on screen
				if (lastText === transcript) return;
				
				// remember new text if different
				lastText = transcript;

				// set text to scren
				words.innerHTML = `<h2>${transcript}</h2>`;

				// generate new hue and apply to background
				const hue = Math.random() * 100;
				document.body.style.background = `hsl(236, 50%, ${hue}%)`;

				// set text color in contract to background color
				hue >= 50 ? words.style.color = "black" : words.style.color = "white";
			
			});

			// start over at end
			recognition.addEventListener('end', recognition.start);

			// rollin'
			recognition.start();

			console.log('up and running')

		</Script>


	</body>


</html>

