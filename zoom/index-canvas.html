<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>__ speed</title>
</head>

<body>

	<canvas id="speed"></canvas>



	<style>
		body {
			margin: 0;
		}

		#speed {
			height: 100vh;
		}
	</style>


	<script>

		const canvas = document.getElementById('speed');
		const ctx = canvas.getContext('2d');
		const currentPicture = [];

		function getRandomBlue() {
			const hue = Math.floor(Math.random() * 30 + 40);
			return `hsl(221, 50%, ${hue}%)`;
		}

		function resetCanvas() {
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
			ctx.lineJoin = 'round';
			ctx.lineCap = 'round';
			ctx.lineWidth = 1;
			ctx.fillStyle = 'white';
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			currentPicture.push(makeNewRect(getRandomBlue()));

		}

		function renderRect(rect) {
			const xWalk = canvas.width / 100;
			const yWalk = canvas.height / 100;
			const { size, color } = rect;

			const x = canvas.width / 2 - xWalk * (size / 2);
			const y = canvas.height / 2 - yWalk * (size / 2);
			ctx.fillStyle = color;
			ctx.fillRect(x, y, size * xWalk, size * yWalk);
		}

		function handleResize() {
			resetCanvas()
			const columns = window.innerWidth / 40;
			start();
		}

		function makeNewRect(color) {
			const rect = {
				size: 1,
				color
			}
			return rect;
		}

		function start() {
			const interval = setInterval(() => {
				currentPicture.forEach(rect => {
					renderRect(rect);
					rect.size += 1;
					if (rect.size > 200) currentPicture.splice(currentPicture.indexOf(rect), 1)
				})
				if (currentPicture[currentPicture.length - 1].size === 20) currentPicture.push(makeNewRect(getRandomBlue()));
			}, 200);
		}

		resetCanvas()
		start();


		window.addEventListener('resize', handleResize);

	</script>



</body>

</html>