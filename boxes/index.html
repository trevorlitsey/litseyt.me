<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>__ boxes</title>
</head>

<body>


	<canvas></canvas>

	<style>
		body {
			margin: 0;
			display: flex;
			justify-content: center;
			align-items: center;
			background: cornflowerblue;
		}

		canvas {
			width: 100%;
			height: 100%;
		}
	</style>


	<script>

		var canvas = document.querySelector('canvas');
		var context = canvas.getContext('2d');
		context.lineWidth = 2;

		var size = window.innerWidth;

		var squareSize = 40;
		var randomDisplacement = 4;
		var rotateMultiplier = 4;

		function draw(width, height) {
			context.beginPath();
			context.fillStyle = getRandomBlue();
			context.fillRect(-width / 2, -height / 2, width, height);
			context.stroke();
		}

		function paintPicture() {
			context.clearRect(0, 0, canvas.width, canvas.height);
			context.beginPath();
			for (var i = ((canvas.width % squareSize) / 2); i <= canvas.width + squareSize; i += squareSize) {
				for (var j = ((canvas.height % squareSize) / 2); j <= canvas.height + squareSize; j += squareSize) {
					var plusOrMinus = Math.random() < 0.5 ? -1 : 1;
					var rotateAmt = Math.PI / 180 * plusOrMinus * Math.random() * rotateMultiplier;

					plusOrMinus = Math.random() < 0.5 ? -1 : 1;
					var translateAmt = j / size * plusOrMinus * Math.random() * randomDisplacement;

					context.save();
					context.translate(i + translateAmt, j)
					context.rotate(rotateAmt);
					draw(squareSize, squareSize);
					context.restore();
				}
			}
			setTimeout(() =>
				window.requestAnimationFrame(paintPicture), 60
			)
		}

		function resize() {
			canvas.width = window.innerWidth - squareSize;
			canvas.height = window.innerHeight - squareSize;
			paintPicture();
		}

		function getRandomBlue() {
			const hue = (Math.random() * 15) + 40;
			return `hsl(221, 50%, ${hue}%)`;
		}

		window.addEventListener('load', resize)
		window.addEventListener('resize', resize);


	</script>

</body>

</html>